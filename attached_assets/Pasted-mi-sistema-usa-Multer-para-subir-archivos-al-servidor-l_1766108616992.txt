mi sistema usa **Multer** para subir archivos al servidor local (carpeta `public/imagenes/`), pero:

- **No estÃ¡ funcionando** (probablemente por permisos, CORS, o lÃ­mites del servidor)
- **No es escalable** (archivos quedan en el servidor, no en la nube)
- **LÃ­mite de 50MB** por archivo (lÃ­nea 47 de `routes/upload.js`)


### **Tu soluciÃ³n propuesta:**

1. **Cloudinary** â†’ Para imÃ¡genes y videos < 50MB
2. **YouTube/Vimeo** â†’ Para videos grandes (> 50MB)


---

## **MI OPINIÃ“N:**



1. **Cloudinary es perfecto** para tu caso:

1. Maneja imÃ¡genes + videos automÃ¡ticamente
2. OptimizaciÃ³n automÃ¡tica (compresiÃ³n, formatos modernos WebP/AVIF)
3. Transformaciones on-the-fly (redimensionar, recortar, watermarks)
4. CDN global (carga rÃ¡pida desde cualquier parte del mundo)
5. Plan gratuito generoso (25 GB almacenamiento + 25 GB bandwidth/mes)



2. **YouTube/Vimeo para videos grandes** es smart:

1. Gratis (YouTube)
2. Procesamiento automÃ¡tico (calidad adaptativa, captions, etc.)
3. No consumes espacio en Cloudinary
4. Mejor UX (controles nativos de YouTube)





---

## **CÃ“MO LO HARÃA (Mi recomendaciÃ³n):**

### **Arquitectura propuesta:**

```plaintext
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚
â”‚  (React CMS)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BACKEND (Node.js/Express)             â”‚
â”‚                                         â”‚
â”‚  ğŸ“¤ Upload Router                       â”‚
â”‚  â”œâ”€ POST /api/upload/image             â”‚
â”‚  â”‚  â””â”€â–º Cloudinary                     â”‚
â”‚  â”‚                                      â”‚
â”‚  â”œâ”€ POST /api/upload/video             â”‚
â”‚  â”‚  â”œâ”€ Si < 50MB â†’ Cloudinary          â”‚
â”‚  â”‚  â””â”€ Si > 50MB â†’ Manual YouTube      â”‚
â”‚  â”‚                                      â”‚
â”‚  â””â”€ POST /api/upload/youtube           â”‚
â”‚     â””â”€â–º YouTube Data API (opcional)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Flujo de trabajo:**

#### **Para imÃ¡genes y videos < 50MB:**

1. Usuario selecciona archivo en React
2. Frontend envÃ­a a `POST /api/upload/image` o `/video`
3. Backend sube a Cloudinary con SDK
4. Cloudinary retorna URL pÃºblica (`https://res.cloudinary.com/...`)
5. Backend guarda URL en MySQL
6. Frontend recibe URL y la muestra


#### **Para videos > 50MB:**

**OpciÃ³n A (MÃ¡s simple - RECOMENDADA):**

- Usuario sube manualmente a YouTube
- Pega el link de YouTube en el CMS
- Sistema detecta y embebe con iframe




---

## **LO QUE NECESITas  PARA EMPEZAR:**

### 1. **Credenciales de Cloudinary:**

```plaintext
CLOUDINARY_CLOUD_NAME=tu_cloud_name
CLOUDINARY_API_KEY=123456789012345
CLOUDINARY_API_SECRET=tu_secret_aqui
```

*(Ve a tu dashboard de Cloudinary: [https://console.cloudinary.com/](https://console.cloudinary.com/))*

### 2. **Credenciales de MySQL (si no las tengo):**

```plaintext
DB_HOST=localhost (o tu host)
DB_USER=root
DB_PASSWORD=tu_password
DB_NAME=wikiconflicts


## **PLAN DE IMPLEMENTACIÃ“N:**

### **Paso 1: Backend**

- âœ… Instalar SDK de Cloudinary (`npm install cloudinary`)
- âœ… Crear servicio `cloudinaryService.js`
- âœ… Modificar `routes/upload.js` para usar Cloudinary en vez de Multer
- âœ… Agregar endpoint para videos externos (YouTube/Vimeo)


### **Paso 2: Base de datos**

- âœ… Ya tienes las tablas (fototeca, etc.)
- Solo necesito actualizar el campo `url` para guardar URLs de Cloudinary


### **Paso 3: Frontend**

- âœ… Los componentes ya existen (`ImageUploader`, `MultiMediaUploader`, etc.)
- Solo ajustar el manejo de respuestas (recibir URL de Cloudinary)
- âœ… Agregar input para pegar links de YouTube/Vimeo en videos grandes


### **Paso 4: Testing**

- Probar upload de imagen
- Probar upload de video < 50MB
- Probar embed de YouTube/Vimeo

